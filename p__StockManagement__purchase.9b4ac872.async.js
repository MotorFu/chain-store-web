(self.webpackChunkchain_store=self.webpackChunkchain_store||[]).push([[930],{70725:function(Y,x,e){"use strict";e.d(x,{oM:function(){return T},Rk:function(){return f},P:function(){return k},O_:function(){return y},Pd:function(){return E},mt:function(){return D}});var T={pageSize:10},O;(function(r){r[r.SUPER_ADMIN=1]="SUPER_ADMIN",r[r.NORMAL_ADMIN=2]="NORMAL_ADMIN",r[r.STORE_ADMIN=3]="STORE_ADMIN"})(O||(O={}));var j;(function(r){r[r.SUPER_ADMIN=1]="SUPER_ADMIN",r[r.NORMAL_ADMIN=2]="NORMAL_ADMIN",r[r.CASHIER=3]="CASHIER"})(j||(j={}));var A;(function(r){r[r.CASH=1]="CASH",r[r.ALIPAY=2]="ALIPAY",r[r.WECHAT=3]="WECHAT"})(A||(A={}));var f=[{value:0,label:"\u4E0D\u9650"},{value:1,label:"\u73B0\u91D1",color:"#ff7b7b"},{value:2,label:"\u652F\u4ED8\u5B9D",color:"#03a6fc"},{value:3,label:"\u5FAE\u4FE1",color:"#62e367"}],k=[{value:0,label:"\u4E0D\u9650"},{value:1,label:"\u8349\u7A3F",color:"#ccc"},{value:2,label:"\u5F85\u91C7\u8D2D",color:"#03a6fc"},{value:3,label:"\u91C7\u8D2D\u5B8C\u6210",color:"#28c522"}],y=[{value:0,label:"\u4E0D\u9650"},{value:1,label:"\u666E\u901A\u5165\u5E93"},{value:2,label:"\u91C7\u8D2D\u5165\u5E93"}],E=[{value:0,label:"\u4E0D\u9650"},{value:1,label:"\u8349\u7A3F",color:"#ccc"},{value:2,label:"\u5F85\u5165\u5E93",color:"#03a6fc"},{value:3,label:"\u5165\u5E93\u5B8C\u6210",color:"#28c522"}],D=[{value:0,label:"\u4E0D\u9650"},{value:1,label:"\u8349\u7A3F",color:"#ccc"},{value:2,label:"\u5F85\u76D8\u70B9",color:"#03a6fc"},{value:3,label:"\u76D8\u70B9\u5B8C\u6210",color:"#28c522"}]},63948:function(Y,x,e){"use strict";e.r(x),e.d(x,{default:function(){return re}});var T=e(57338),O=e(25084),j=e(57663),A=e(71577),f=e(3182),k=e(71194),y=e(57016),E=e(49111),D=e(19650),r=e(71153),z=e(60331),N=e(2824),V=e(94043),d=e.n(V),R=e(67294),K=e(81907),J=e(85224),Q=e(33145),Z=e(11849),F=e(21010);function X(o,s,i,n){return P.apply(this,arguments)}function P(){return P=(0,f.Z)(d().mark(function o(s,i,n,c){return d().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,F.WY)("/api/store/purchase/order",(0,Z.Z)({method:"GET",params:(0,Z.Z)((0,Z.Z)({},s),{},{sorter:i,filter:n})},c||{})));case 1:case"end":return p.stop()}},o)})),P.apply(this,arguments)}function $(o){return b.apply(this,arguments)}function b(){return b=(0,f.Z)(d().mark(function o(s){return d().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,F.WY)("/api/store/purchase/order",(0,Z.Z)({method:"DELETE"},s||{})));case 1:case"end":return n.stop()}},o)})),b.apply(this,arguments)}function ne(o,s,i,n,c){return M.apply(this,arguments)}function M(){return M=_asyncToGenerator(_regeneratorRuntime.mark(function o(s,i,n,c,h){return _regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",request("/api/store/purchase/order/".concat(s),_objectSpread({method:"GET",params:_objectSpread(_objectSpread({},i),{},{sorter:n,filter:c})},h||{})));case 1:case"end":return m.stop()}},o)})),M.apply(this,arguments)}function ue(o,s){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime.mark(function o(s,i){return _regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",request("/api/store/purchase/orderItem",_objectSpread({method:"DELETE",data:s},i||{})));case 1:case"end":return c.stop()}},o)})),w.apply(this,arguments)}var q=e(96459),L=e(70725),_=e(49101),a=e(85893),ee=function(){var s=(0,R.useState)(!1),i=(0,N.Z)(s,2),n=i[0],c=i[1],h=(0,R.useRef)(),p=(0,R.useState)([]),m=(0,N.Z)(p,2),C=m[0],H=m[1],te=(0,R.useState)(),B=(0,N.Z)(te,2),S=B[0],G=B[1],W=[{title:"ID",key:"id",dataIndex:"id",sorter:!0},{title:"\u8BA2\u5355\u53F7",key:"orderNo",dataIndex:"orderNo"},{title:"\u95E8\u5E97",key:"storeName",dataIndex:"storeName"},{title:"\u5546\u54C1\u6570",key:"productCount",dataIndex:"productCount"},{title:"\u72B6\u6001",key:"status",dataIndex:"status",render:function(l,t){var v=L.P[t.status];return(0,a.jsx)(z.Z,{color:v.color,children:v.label})}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"createdAt",dataIndex:"createdAt",valueType:"dateTime",sorter:!0,hideInSearch:!0},{title:"\u64CD\u4F5C",key:"option",dataIndex:"option",hideInSearch:!0,hideInDescriptions:!0,render:function(l,t){return(0,a.jsxs)(D.Z,{size:"middle",children:[(0,a.jsx)("a",{onClick:function(){G(t),c(!0)},children:"\u67E5\u770B"},"view"),(0,a.jsx)("a",{onClick:function(){},children:"\u7F16\u8F91"},"edit"),(0,a.jsx)("a",{onClick:function(){return ae(t)},children:"\u5220\u9664"},"delete")]})}}];function ae(u){y.Z.confirm({title:"\u63D0\u793A",content:(0,a.jsxs)("div",{children:["\u786E\u5B9A\u8981\u5220\u9664\u3010",u.orderNo,"\u3011\u91C7\u8D2D\u5355\uFF1F"]}),onOk:function(){var l=(0,f.Z)(d().mark(function v(){var I;return d().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,$({data:[u]});case 2:I=g.sent,I&&h.current&&h.current.reload();case 4:case"end":return g.stop()}},v)}));function t(){return l.apply(this,arguments)}return t}()})}return(0,a.jsxs)(K.ZP,{children:[(0,a.jsx)(Q.ZP,{pagination:L.oM,headerTitle:"",actionRef:h,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,a.jsxs)(A.Z,{type:"primary",onClick:function(){},children:[(0,a.jsx)(_.Z,{})," \u6DFB\u52A0"]},"primary")]},request:X,columns:W,rowSelection:{onChange:function(l,t){H(t)}}}),(C==null?void 0:C.length)>0&&(0,a.jsx)(J.Z,{extra:(0,a.jsx)("div",{children:(0,a.jsxs)("span",{children:["\u5DF2\u9009\u4E2D",C.reduce(function(u,l){return u+l.id},0)," \u4E2A\u8D26\u53F7"]})}),children:(0,a.jsx)(A.Z,{onClick:(0,f.Z)(d().mark(function u(){var l,t;return d().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return console.log("selectedRowsState--->",C),I.next=3,$(C.map(function(U){return U.id}));case 3:H([]),(l=h.current)===null||l===void 0||(t=l.reloadAndRest)===null||t===void 0||t.call(l);case 5:case"end":return I.stop()}},u)})),children:"\u6279\u91CF\u5220\u9664"})}),(0,a.jsx)(O.Z,{width:600,visible:n,onClose:function(){G(void 0),c(!1)},closable:!1,children:(S==null?void 0:S.orderNo)&&(0,a.jsx)(q.Z,{column:2,title:"\u91C7\u8D2D\u5355\u8BE6\u60C5",request:(0,f.Z)(d().mark(function u(){return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{data:S||{}});case 1:case"end":return t.stop()}},u)})),params:{id:S==null?void 0:S.id},columns:W})})]})},re=ee}}]);
