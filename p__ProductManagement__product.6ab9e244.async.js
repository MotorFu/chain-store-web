(self.webpackChunkchain_store=self.webpackChunkchain_store||[]).push([[286],{70725:function(z,I,a){"use strict";a.d(I,{oM:function(){return v},Rk:function(){return W}});var v={pageSize:10},D;(function(l){l[l.SUPER_ADMIN=1]="SUPER_ADMIN",l[l.NORMAL_ADMIN=2]="NORMAL_ADMIN",l[l.STORE_ADMIN=3]="STORE_ADMIN"})(D||(D={}));var b;(function(l){l[l.SUPER_ADMIN=1]="SUPER_ADMIN",l[l.NORMAL_ADMIN=2]="NORMAL_ADMIN",l[l.CASHIER=3]="CASHIER"})(b||(b={}));var p;(function(l){l[l.CASH=1]="CASH",l[l.ALIPAY=2]="ALIPAY",l[l.WECHAT=3]="WECHAT"})(p||(p={}));var W=[{value:0,label:"\u4E0D\u9650"},{value:1,label:"\u73B0\u91D1"},{value:2,label:"\u652F\u4ED8\u5B9D"},{value:3,label:"\u5FAE\u4FE1"}]},25482:function(z,I,a){"use strict";a.r(I),a.d(I,{default:function(){return ge}});var v=a(11849),D=a(57663),b=a(71577),p=a(3182),W=a(71194),l=a(57016),je=a(49111),G=a(19650),Ze=a(71153),L=a(60331),R=a(2824),K=a(94043),c=a.n(K),C=a(67294),V=a(81907),J=a(85224),Q=a(33145),X=a(49101),F=a(21010);function q(n,r,t,e){return E.apply(this,arguments)}function E(){return E=(0,p.Z)(c().mark(function n(r,t,e,u){return c().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,F.WY)("/api/product",(0,v.Z)({method:"GET",params:(0,v.Z)((0,v.Z)({},r),{},{sorter:t,filter:e})},u||{})));case 1:case"end":return j.stop()}},n)})),E.apply(this,arguments)}function _(n){return T.apply(this,arguments)}function T(){return T=(0,p.Z)(c().mark(function n(r){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("options",r),e.abrupt("return",(0,F.WY)("/api/product",(0,v.Z)({method:"PUT"},r||{})));case 2:case"end":return e.stop()}},n)})),T.apply(this,arguments)}function ee(n){return M.apply(this,arguments)}function M(){return M=(0,p.Z)(c().mark(function n(r){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,F.WY)("/api/product/enabled",(0,v.Z)({method:"PUT"},r||{})));case 1:case"end":return e.stop()}},n)})),M.apply(this,arguments)}function re(n){return $.apply(this,arguments)}function $(){return $=(0,p.Z)(c().mark(function n(r){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("options",r),e.abrupt("return",(0,F.WY)("/api/product",(0,v.Z)({method:"POST",headers:{"Content-Type":"application/json"}},r||{})));case 2:case"end":return e.stop()}},n)})),$.apply(this,arguments)}function U(n){return N.apply(this,arguments)}function N(){return N=(0,p.Z)(c().mark(function n(r){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,F.WY)("/api/product",(0,v.Z)({method:"DELETE"},r||{})));case 1:case"end":return e.stop()}},n)})),N.apply(this,arguments)}var ne=a(37476),x=a(5966),te=a(26743),ae=a(9706),ue=a(61834),ie=["fieldProps","proFieldProps"];function k(){return k=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}return n},k.apply(this,arguments)}function B(n,r){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);r&&(e=e.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),t.push.apply(t,e)}return t}function Y(n){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?B(Object(t),!0).forEach(function(e){le(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):B(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}function le(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function se(n,r){if(n==null)return{};var t=oe(n,r),e,u;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(u=0;u<s.length;u++)e=s[u],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function oe(n,r){if(n==null)return{};var t={},e=Object.keys(n),u,s;for(s=0;s<e.length;s++)u=e[s],!(r.indexOf(u)>=0)&&(t[u]=n[u]);return t}var ce=function(r,t){var e=r.fieldProps,u=r.proFieldProps,s=se(r,ie);return C.createElement(ae.ZP,k({text:e==null?void 0:e.value,ref:t,mode:"edit",valueType:"textarea",fieldProps:Y(Y({},e),{},{onChange:function(){for(var Z,h,A=arguments.length,S=new Array(A),O=0;O<A;O++)S[O]=arguments[O];e==null||(Z=e.onChange)===null||Z===void 0||Z.call.apply(Z,[e].concat(S)),s==null||(h=s.onChange)===null||h===void 0||h.call.apply(h,[s].concat(S))}})},u))},de=(0,ue.Z)(C.forwardRef(ce)),i=a(85893),fe={labelCol:{span:4},wrapperCol:{span:16}},ve=function(r){console.log("props.values-->",r.values);var t=(0,C.useRef)();return(0,i.jsxs)(ne.Z,(0,v.Z)((0,v.Z)({layout:"horizontal"},fe),{},{title:r.values.id==null?"\u6DFB\u52A0\u95E8\u5E97":"\u4FEE\u6539\u95E8\u5E97",visible:r.visible,formRef:t,modalProps:{destroyOnClose:!0,afterClose:function(){var u;(u=t.current)===null||u===void 0||u.resetFields()},onCancel:function(){r.onCancel()}},initialValues:{id:r.values.id,image:r.values.image?[{thumbUrl:r.values.image}]:null,name:r.values.name,unit:"\u4EF6",originalPrice:r.values.originalPrice,retailPrice:r.values.retailPrice,description:r.values.description},onFinish:r.onSubmit,children:[(0,i.jsx)(x.Z,{name:"id",label:"ID",hidden:!0}),(0,i.jsx)(te.Z,{name:"image",label:"\u56FE\u7247",max:1,fieldProps:{name:"file",listType:"picture-card"},transform:function(u){return{icon:u[0].thumbUrl}},rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u56FE\u7247\uFF01"}]}),(0,i.jsx)(x.Z,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0\uFF01"}]}),(0,i.jsx)(de,{name:"description",label:"\u5546\u54C1\u63CF\u8FF0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1\u63CF\u8FF0\uFF01"}]}),(0,i.jsx)(x.Z,{name:"unit",label:"\u8BA1\u91CF\u5355\u4F4D",hidden:!0}),(0,i.jsx)(x.Z,{name:"originalPrice",label:"\u539F\u4EF7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u539F\u4EF7\uFF01"}]}),(0,i.jsx)(x.Z,{name:"retailPrice",label:"\u73B0\u4EF7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u73B0\u4EF7\uFF01"}]})]}))},pe=ve,he=a(70725),me=function(){var r=(0,C.useState)(!1),t=(0,R.Z)(r,2),e=t[0],u=t[1],s=(0,C.useRef)(),j=(0,C.useState)([]),Z=(0,R.Z)(j,2),h=Z[0],A=Z[1],S=(0,C.useState)(),O=(0,R.Z)(S,2),H=O[0],w=O[1],Pe=[{title:"ID",key:"id",dataIndex:"id",sorter:!0,width:80},{title:"\u56FE\u7247",key:"image",dataIndex:"image",valueType:"image",hideInSearch:!0},{title:"\u540D\u79F0",key:"name",dataIndex:"name"},{title:"\u63CF\u8FF0",key:"description",dataIndex:"description"},{title:"\u8BA1\u91CF\u5355\u4F4D",key:"unit",dataIndex:"unit",width:80,hideInSearch:!0},{title:"\u72B6\u6001",key:"enabled",dataIndex:"enabled",valueType:"select",initialValue:"0",width:80,valueEnum:{0:{text:"\u4E0D\u9650",status:""},true:{text:"\u5DF2\u542F\u7528",checked:!0,status:""},false:{text:"\u5DF2\u7981\u7528",checked:!1,status:""}},render:function(d,o){return o.enabled?(0,i.jsx)(L.Z,{color:"success",children:"\u5DF2\u542F\u7528"}):(0,i.jsx)(L.Z,{color:"error",children:"\u5DF2\u7981\u7528"})}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"createdAt",dataIndex:"createdAt",valueType:"dateTime",sorter:!0,hideInSearch:!0},{title:"\u64CD\u4F5C",key:"option",dataIndex:"option",width:160,hideInSearch:!0,render:function(d,o){return(0,i.jsxs)(G.Z,{size:"middle",children:[(0,i.jsx)("a",{onClick:function(){w(o),u(!0)},children:"\u7F16\u8F91"},"edit"),(0,i.jsx)("a",{onClick:function(){return ye(o)},children:o.enabled?"\u7981\u7528":"\u542F\u7528"},"enabled"),(0,i.jsx)("a",{onClick:function(){return Ce(o)},children:"\u5220\u9664"},"delete")]})}}];function ye(f){l.Z.confirm({title:"\u63D0\u793A",content:(0,i.jsxs)("div",{children:["\u786E\u5B9A\u8981",f.enabled?"\u7981\u7528":"\u5F00\u542F","\u5546\u54C1\uFF1F"]}),onOk:function(){var d=(0,p.Z)(c().mark(function m(){var g;return c().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,ee({data:f});case 2:g=y.sent,g&&s.current&&s.current.reload();case 4:case"end":return y.stop()}},m)}));function o(){return d.apply(this,arguments)}return o}()})}function Ce(f){l.Z.confirm({title:"\u63D0\u793A",content:(0,i.jsxs)("div",{children:["\u786E\u5B9A\u8981\u5220\u9664\u3010",f.name,"\u3011\u5546\u54C1\uFF1F"]}),onOk:function(){var d=(0,p.Z)(c().mark(function m(){var g;return c().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,U({data:[f]});case 2:g=y.sent,g&&s.current&&s.current.reload();case 4:case"end":return y.stop()}},m)}));function o(){return d.apply(this,arguments)}return o}()})}return(0,i.jsxs)(V.ZP,{children:[(0,i.jsx)(Q.ZP,{pagination:he.oM,headerTitle:"headerTitle",actionRef:s,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,i.jsxs)(b.Z,{type:"primary",onClick:function(){e||(w(void 0),u(!0))},children:[(0,i.jsx)(X.Z,{})," \u6DFB\u52A0"]},"primary")]},request:q,columns:Pe,rowSelection:{onChange:function(d,o){A(o)}}}),(h==null?void 0:h.length)>0&&(0,i.jsx)(J.Z,{extra:(0,i.jsx)("div",{children:(0,i.jsxs)("span",{children:["\u5DF2\u9009\u4E2D",h.reduce(function(f,d){return f+d.id},0)," \u4E2A\u8D26\u53F7"]})}),children:(0,i.jsx)(b.Z,{onClick:(0,p.Z)(c().mark(function f(){var d,o;return c().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return console.log("selectedRowsState--->",h),g.next=3,U({data:h});case 3:A([]),(d=s.current)===null||d===void 0||(o=d.reloadAndRest)===null||o===void 0||o.call(d);case 5:case"end":return g.stop()}},f)})),children:"\u6279\u91CF\u5220\u9664"})}),(0,i.jsx)(pe,{onSubmit:function(){var f=(0,p.Z)(c().mark(function d(o){var m;return c().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(o.id==null){P.next=6;break}return P.next=3,_({data:(0,v.Z)((0,v.Z)({},H),o)});case 3:m=P.sent,P.next=9;break;case 6:return P.next=8,re({data:o});case 8:m=P.sent;case 9:m&&(w(void 0),u(!1),s.current&&s.current.reload());case 10:case"end":return P.stop()}},d)}));return function(d){return f.apply(this,arguments)}}(),onCancel:function(){w(void 0),u(!1)},visible:e,values:H||{}})]})},ge=me}}]);
