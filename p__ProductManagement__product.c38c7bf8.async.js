(self.webpackChunkchain_store=self.webpackChunkchain_store||[]).push([[286],{70725:function(V,I,a){"use strict";a.d(I,{oM:function(){return v},Rk:function(){return U},P:function(){return w},O_:function(){return B},Pd:function(){return E},mt:function(){return Y}});var v={pageSize:10},R;(function(i){i[i.SUPER_ADMIN=1]="SUPER_ADMIN",i[i.NORMAL_ADMIN=2]="NORMAL_ADMIN",i[i.STORE_ADMIN=3]="STORE_ADMIN"})(R||(R={}));var Z;(function(i){i[i.SUPER_ADMIN=1]="SUPER_ADMIN",i[i.NORMAL_ADMIN=2]="NORMAL_ADMIN",i[i.CASHIER=3]="CASHIER"})(Z||(Z={}));var p;(function(i){i[i.CASH=1]="CASH",i[i.ALIPAY=2]="ALIPAY",i[i.WECHAT=3]="WECHAT"})(p||(p={}));var U=[{value:0,label:"\u4E0D\u9650"},{value:1,label:"\u73B0\u91D1",color:"#ff7b7b"},{value:2,label:"\u652F\u4ED8\u5B9D",color:"#03a6fc"},{value:3,label:"\u5FAE\u4FE1",color:"#62e367"}],w=[{value:0,label:"\u4E0D\u9650"},{value:1,label:"\u8349\u7A3F",color:"#ccc"},{value:2,label:"\u5F85\u91C7\u8D2D",color:"#03a6fc"},{value:3,label:"\u91C7\u8D2D\u5B8C\u6210",color:"#28c522"}],B=[{value:0,label:"\u4E0D\u9650"},{value:1,label:"\u666E\u901A\u5165\u5E93"},{value:2,label:"\u91C7\u8D2D\u5165\u5E93"}],E=[{value:0,label:"\u4E0D\u9650"},{value:1,label:"\u8349\u7A3F",color:"#ccc"},{value:2,label:"\u5F85\u5165\u5E93",color:"#03a6fc"},{value:3,label:"\u5165\u5E93\u5B8C\u6210",color:"#28c522"}],Y=[{value:0,label:"\u4E0D\u9650"},{value:1,label:"\u8349\u7A3F",color:"#ccc"},{value:2,label:"\u5F85\u76D8\u70B9",color:"#03a6fc"},{value:3,label:"\u76D8\u70B9\u5B8C\u6210",color:"#28c522"}]},25482:function(V,I,a){"use strict";a.r(I),a.d(I,{default:function(){return Pe}});var v=a(11849),R=a(57663),Z=a(71577),p=a(3182),U=a(71194),w=a(57016),B=a(49111),E=a(19650),Y=a(71153),i=a(60331),T=a(2824),J=a(94043),c=a.n(J),y=a(67294),Q=a(81907),X=a(85224),q=a(33145),_=a(49101),F=a(21010);function ee(n,r,t,e){return M.apply(this,arguments)}function M(){return M=(0,p.Z)(c().mark(function n(r,t,e,u){return c().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,F.WY)("/api/product",(0,v.Z)({method:"GET",params:(0,v.Z)((0,v.Z)({},r),{},{sorter:t,filter:e})},u||{})));case 1:case"end":return O.stop()}},n)})),M.apply(this,arguments)}function re(n){return k.apply(this,arguments)}function k(){return k=(0,p.Z)(c().mark(function n(r){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("options",r),e.abrupt("return",(0,F.WY)("/api/product",(0,v.Z)({method:"PUT"},r||{})));case 2:case"end":return e.stop()}},n)})),k.apply(this,arguments)}function ne(n){return $.apply(this,arguments)}function $(){return $=(0,p.Z)(c().mark(function n(r){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,F.WY)("/api/product/enabled",(0,v.Z)({method:"PUT"},r||{})));case 1:case"end":return e.stop()}},n)})),$.apply(this,arguments)}function te(n){return N.apply(this,arguments)}function N(){return N=(0,p.Z)(c().mark(function n(r){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("options",r),e.abrupt("return",(0,F.WY)("/api/product",(0,v.Z)({method:"POST",headers:{"Content-Type":"application/json"}},r||{})));case 2:case"end":return e.stop()}},n)})),N.apply(this,arguments)}function H(n){return W.apply(this,arguments)}function W(){return W=(0,p.Z)(c().mark(function n(r){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,F.WY)("/api/product",(0,v.Z)({method:"DELETE"},r||{})));case 1:case"end":return e.stop()}},n)})),W.apply(this,arguments)}var ae=a(37476),S=a(5966),ue=a(26743),le=a(9706),ie=a(61834),oe=["fieldProps","proFieldProps"];function L(){return L=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}return n},L.apply(this,arguments)}function z(n,r){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);r&&(e=e.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),t.push.apply(t,e)}return t}function G(n){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?z(Object(t),!0).forEach(function(e){se(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}function se(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function ce(n,r){if(n==null)return{};var t=de(n,r),e,u;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(u=0;u<o.length;u++)e=o[u],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function de(n,r){if(n==null)return{};var t={},e=Object.keys(n),u,o;for(o=0;o<e.length;o++)u=e[o],!(r.indexOf(u)>=0)&&(t[u]=n[u]);return t}var fe=function(r,t){var e=r.fieldProps,u=r.proFieldProps,o=ce(r,oe);return y.createElement(le.ZP,L({text:e==null?void 0:e.value,ref:t,mode:"edit",valueType:"textarea",fieldProps:G(G({},e),{},{onChange:function(){for(var C,h,x=arguments.length,A=new Array(x),j=0;j<x;j++)A[j]=arguments[j];e==null||(C=e.onChange)===null||C===void 0||C.call.apply(C,[e].concat(A)),o==null||(h=o.onChange)===null||h===void 0||h.call.apply(h,[o].concat(A))}})},u))},ve=(0,ie.Z)(y.forwardRef(fe)),l=a(85893),pe={labelCol:{span:4},wrapperCol:{span:16}},he=function(r){console.log("props.values-->",r.values);var t=(0,y.useRef)();return(0,l.jsxs)(ae.Z,(0,v.Z)((0,v.Z)({layout:"horizontal"},pe),{},{title:r.values.id==null?"\u6DFB\u52A0\u5546\u54C1":"\u4FEE\u6539\u5546\u54C1",visible:r.visible,formRef:t,modalProps:{destroyOnClose:!0,afterClose:function(){var u;(u=t.current)===null||u===void 0||u.resetFields()},onCancel:function(){r.onCancel()}},initialValues:{id:r.values.id,image:r.values.image?[{thumbUrl:r.values.image}]:null,name:r.values.name,unit:"\u4EF6",originalPrice:r.values.originalPrice,retailPrice:r.values.retailPrice,description:r.values.description},onFinish:r.onSubmit,children:[(0,l.jsx)(S.Z,{name:"id",label:"ID",hidden:!0}),(0,l.jsx)(ue.Z,{name:"image",label:"\u56FE\u7247",max:1,fieldProps:{name:"file",listType:"picture-card"},transform:function(u){return{icon:u[0].thumbUrl}},rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u56FE\u7247\uFF01"}]}),(0,l.jsx)(S.Z,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0\uFF01"}]}),(0,l.jsx)(ve,{name:"description",label:"\u5546\u54C1\u63CF\u8FF0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1\u63CF\u8FF0\uFF01"}]}),(0,l.jsx)(S.Z,{name:"unit",label:"\u8BA1\u91CF\u5355\u4F4D",hidden:!0}),(0,l.jsx)(S.Z,{name:"originalPrice",label:"\u539F\u4EF7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u539F\u4EF7\uFF01"}]}),(0,l.jsx)(S.Z,{name:"retailPrice",label:"\u73B0\u4EF7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u73B0\u4EF7\uFF01"}]})]}))},me=he,ge=a(70725),be=function(){var r=(0,y.useState)(!1),t=(0,T.Z)(r,2),e=t[0],u=t[1],o=(0,y.useRef)(),O=(0,y.useState)([]),C=(0,T.Z)(O,2),h=C[0],x=C[1],A=(0,y.useState)(),j=(0,T.Z)(A,2),K=j[0],D=j[1],ye=[{title:"ID",key:"id",dataIndex:"id",sorter:!0,width:80},{title:"\u56FE\u7247",key:"image",dataIndex:"image",valueType:"image",hideInSearch:!0},{title:"\u540D\u79F0",key:"name",dataIndex:"name"},{title:"\u63CF\u8FF0",key:"description",dataIndex:"description"},{title:"\u8BA1\u91CF\u5355\u4F4D",key:"unit",dataIndex:"unit",width:80,hideInSearch:!0},{title:"\u72B6\u6001",key:"enabled",dataIndex:"enabled",valueType:"select",initialValue:"0",width:80,valueEnum:{0:{text:"\u4E0D\u9650",status:""},true:{text:"\u5DF2\u542F\u7528",checked:!0,status:""},false:{text:"\u5DF2\u7981\u7528",checked:!1,status:""}},render:function(d,s){return s.enabled?(0,l.jsx)(i.Z,{color:"success",children:"\u5DF2\u542F\u7528"}):(0,l.jsx)(i.Z,{color:"error",children:"\u5DF2\u7981\u7528"})}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"createdAt",dataIndex:"createdAt",valueType:"dateTime",sorter:!0,hideInSearch:!0},{title:"\u64CD\u4F5C",key:"option",dataIndex:"option",width:160,hideInSearch:!0,render:function(d,s){return(0,l.jsxs)(E.Z,{size:"middle",children:[(0,l.jsx)("a",{onClick:function(){D(s),u(!0)},children:"\u7F16\u8F91"},"edit"),(0,l.jsx)("a",{onClick:function(){return Oe(s)},children:s.enabled?"\u7981\u7528":"\u542F\u7528"},"enabled"),(0,l.jsx)("a",{onClick:function(){return Ce(s)},children:"\u5220\u9664"},"delete")]})}}];function Oe(f){w.Z.confirm({title:"\u63D0\u793A",content:(0,l.jsxs)("div",{children:["\u786E\u5B9A\u8981",f.enabled?"\u7981\u7528":"\u5F00\u542F","\u5546\u54C1\uFF1F"]}),onOk:function(){var d=(0,p.Z)(c().mark(function m(){var g;return c().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,ne({data:f});case 2:g=P.sent,g&&o.current&&o.current.reload();case 4:case"end":return P.stop()}},m)}));function s(){return d.apply(this,arguments)}return s}()})}function Ce(f){w.Z.confirm({title:"\u63D0\u793A",content:(0,l.jsxs)("div",{children:["\u786E\u5B9A\u8981\u5220\u9664\u3010",f.name,"\u3011\u5546\u54C1\uFF1F"]}),onOk:function(){var d=(0,p.Z)(c().mark(function m(){var g;return c().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,H({data:[f]});case 2:g=P.sent,g&&o.current&&o.current.reload();case 4:case"end":return P.stop()}},m)}));function s(){return d.apply(this,arguments)}return s}()})}return(0,l.jsxs)(Q.ZP,{children:[(0,l.jsx)(q.ZP,{pagination:ge.oM,headerTitle:"",actionRef:o,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,l.jsxs)(Z.Z,{type:"primary",onClick:function(){e||(D(void 0),u(!0))},children:[(0,l.jsx)(_.Z,{})," \u6DFB\u52A0"]},"primary")]},request:ee,columns:ye,rowSelection:{onChange:function(d,s){x(s)}}}),(h==null?void 0:h.length)>0&&(0,l.jsx)(X.Z,{extra:(0,l.jsx)("div",{children:(0,l.jsxs)("span",{children:["\u5DF2\u9009\u4E2D",h.reduce(function(f,d){return f+d.id},0)," \u4E2A\u8D26\u53F7"]})}),children:(0,l.jsx)(Z.Z,{onClick:(0,p.Z)(c().mark(function f(){var d,s;return c().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return console.log("selectedRowsState--->",h),g.next=3,H({data:h});case 3:x([]),(d=o.current)===null||d===void 0||(s=d.reloadAndRest)===null||s===void 0||s.call(d);case 5:case"end":return g.stop()}},f)})),children:"\u6279\u91CF\u5220\u9664"})}),(0,l.jsx)(me,{onSubmit:function(){var f=(0,p.Z)(c().mark(function d(s){var m;return c().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(s.id==null){b.next=6;break}return b.next=3,re({data:(0,v.Z)((0,v.Z)({},K),s)});case 3:m=b.sent,b.next=9;break;case 6:return b.next=8,te({data:s});case 8:m=b.sent;case 9:m&&(D(void 0),u(!1),o.current&&o.current.reload());case 10:case"end":return b.stop()}},d)}));return function(d){return f.apply(this,arguments)}}(),onCancel:function(){D(void 0),u(!1)},visible:e,values:K||{}})]})},Pe=be}}]);
