(self.webpackChunkchain_store=self.webpackChunkchain_store||[]).push([[414],{70725:function(L,x,e){"use strict";e.d(x,{oM:function(){return d},Rk:function(){return w}});var d={pageSize:10},R;(function(a){a[a.SUPER_ADMIN=1]="SUPER_ADMIN",a[a.NORMAL_ADMIN=2]="NORMAL_ADMIN",a[a.STORE_ADMIN=3]="STORE_ADMIN"})(R||(R={}));var F;(function(a){a[a.SUPER_ADMIN=1]="SUPER_ADMIN",a[a.NORMAL_ADMIN=2]="NORMAL_ADMIN",a[a.CASHIER=3]="CASHIER"})(F||(F={}));var c;(function(a){a[a.CASH=1]="CASH",a[a.ALIPAY=2]="ALIPAY",a[a.WECHAT=3]="WECHAT"})(c||(c={}));var w=[{value:0,label:"\u4E0D\u9650"},{value:1,label:"\u73B0\u91D1"},{value:2,label:"\u652F\u4ED8\u5B9D"},{value:3,label:"\u5FAE\u4FE1"}]},94007:function(L,x,e){"use strict";e.r(x),e.d(x,{default:function(){return ue}});var d=e(11849),R=e(57663),F=e(71577),c=e(3182),w=e(71194),a=e(57016),de=e(49111),W=e(19650),ce=e(71153),N=e(60331),D=e(2824),Y=e(94043),s=e.n(Y),y=e(67294),H=e(81907),z=e(85224),G=e(33145),V=e(49101),A=e(21010);function K(i,r,f,n){return E.apply(this,arguments)}function E(){return E=(0,c.Z)(s().mark(function i(r,f,n,v){return s().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.abrupt("return",(0,A.WY)("/api/store",(0,d.Z)({method:"GET",params:(0,d.Z)((0,d.Z)({},r),{},{sorter:f,filter:n})},v||{})));case 1:case"end":return Z.stop()}},i)})),E.apply(this,arguments)}function J(i){return M.apply(this,arguments)}function M(){return M=(0,c.Z)(s().mark(function i(r){return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,A.WY)("/api/store",(0,d.Z)({method:"PUT"},r||{})));case 1:case"end":return n.stop()}},i)})),M.apply(this,arguments)}function Q(i){return b.apply(this,arguments)}function b(){return b=(0,c.Z)(s().mark(function i(r){return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,A.WY)("/api/store/enabled",(0,d.Z)({method:"PUT"},r||{})));case 1:case"end":return n.stop()}},i)})),b.apply(this,arguments)}function X(i){return k.apply(this,arguments)}function k(){return k=(0,c.Z)(s().mark(function i(r){return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,A.WY)("/api/store",(0,d.Z)({method:"POST",headers:{"Content-Type":"application/json"}},r||{})));case 1:case"end":return n.stop()}},i)})),k.apply(this,arguments)}function O(i){return T.apply(this,arguments)}function T(){return T=(0,c.Z)(s().mark(function i(r){return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("removeStore options--->",r),n.abrupt("return",(0,A.WY)("/api/store",(0,d.Z)({method:"DELETE"},r||{})));case 2:case"end":return n.stop()}},i)})),T.apply(this,arguments)}var q=e(37476),I=e(5966),_=e(26743),t=e(85893),ee={labelCol:{span:4},wrapperCol:{span:16}},ne=function(r){console.log("props.values-->",r.values);var f=(0,y.useRef)();return(0,t.jsxs)(q.Z,(0,d.Z)((0,d.Z)({layout:"horizontal"},ee),{},{title:r.values.id==null?"\u6DFB\u52A0\u95E8\u5E97":"\u4FEE\u6539\u95E8\u5E97",visible:r.visible,formRef:f,modalProps:{destroyOnClose:!0,afterClose:function(){var v;(v=f.current)===null||v===void 0||v.resetFields()},onCancel:function(){r.onCancel()}},initialValues:{id:r.values.id,image:r.values.image?[{thumbUrl:r.values.image}]:null,name:r.values.name,phone:r.values.phone,address:r.values.address},onFinish:r.onSubmit,children:[(0,t.jsx)(I.Z,{name:"id",width:"md",label:"\u624B\u673A\u53F7",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",hidden:!0}),(0,t.jsx)(_.Z,{name:"image",label:"\u56FE\u7247",max:1,fieldProps:{name:"file",listType:"picture-card"},action:"/upload.do",transform:function(v){return{image:v[0].thumbUrl}},rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u56FE\u7247\uFF01"}]}),(0,t.jsx)(I.Z,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7\uFF01"}]}),(0,t.jsx)(I.Z,{name:"phone",label:"\u8054\u7CFB\u7535\u8BDD",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD\uFF01"}]}),(0,t.jsx)(I.Z,{name:"address",label:"\u5730\u5740",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u95E8\u5E97\u5730\u5740\uFF01"}]})]}))},re=ne,ae=e(70725),te=function(){var r=(0,y.useState)(!1),f=(0,D.Z)(r,2),n=f[0],v=f[1],g=(0,y.useRef)(),Z=(0,y.useState)([]),P=(0,D.Z)(Z,2),C=P[0],$=P[1],se=(0,y.useState)(),B=(0,D.Z)(se,2),U=B[0],j=B[1],le=[{title:"\u95E8\u5E97ID",key:"id",dataIndex:"id",sorter:!0},{title:"\u56FE\u7247",key:"image",dataIndex:"image",valueType:"image",hideInSearch:!0},{title:"\u5E97\u540D",key:"name",dataIndex:"name"},{title:"\u8054\u7CFB\u7535\u8BDD",key:"phone",dataIndex:"phone"},{title:"\u5730\u5740",key:"address",dataIndex:"address"},{title:"\u72B6\u6001",key:"enabled",dataIndex:"enabled",valueType:"select",initialValue:"0",valueEnum:{0:{text:"\u4E0D\u9650",status:""},true:{text:"\u5DF2\u542F\u7528",checked:!0,status:""},false:{text:"\u5DF2\u7981\u7528",checked:!1,status:""}},render:function(l,u){return u.enabled?(0,t.jsx)(N.Z,{color:"success",children:"\u5DF2\u542F\u7528"}):(0,t.jsx)(N.Z,{color:"error",children:"\u5DF2\u7981\u7528"})}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"createdAt",dataIndex:"createdAt",valueType:"dateTime",sorter:!0,hideInSearch:!0},{title:"\u64CD\u4F5C",key:"option",dataIndex:"option",hideInSearch:!0,width:160,render:function(l,u){return(0,t.jsxs)(W.Z,{size:"middle",children:[(0,t.jsx)("a",{onClick:function(){j(u),v(!0)},children:"\u7F16\u8F91"},"edit"),(0,t.jsx)("a",{onClick:function(){return ie(u)},children:u.enabled?"\u7981\u7528":"\u542F\u7528"},"enabled"),(0,t.jsx)("a",{onClick:function(){return oe(u)},children:"\u5220\u9664"},"delete")]})}}];function ie(o){a.Z.confirm({title:"\u63D0\u793A",content:(0,t.jsxs)("div",{children:["\u786E\u5B9A\u8981",o.enabled?"\u7981\u7528":"\u5F00\u542F","\u95E8\u5E97\uFF1F"]}),onOk:function(){var l=(0,c.Z)(s().mark(function h(){var m;return s().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,Q({data:o});case 2:m=S.sent,m&&g.current&&g.current.reload();case 4:case"end":return S.stop()}},h)}));function u(){return l.apply(this,arguments)}return u}()})}function oe(o){a.Z.confirm({title:"\u63D0\u793A",content:(0,t.jsxs)("div",{children:["\u786E\u5B9A\u8981\u5220\u9664\u3010",o.name,"\u3011\u95E8\u5E97\uFF1F"]}),onOk:function(){var l=(0,c.Z)(s().mark(function h(){var m;return s().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,O({data:[o]});case 2:m=S.sent,m&&g.current&&g.current.reload();case 4:case"end":return S.stop()}},h)}));function u(){return l.apply(this,arguments)}return u}()})}return(0,t.jsxs)(H.ZP,{children:[(0,t.jsx)(G.ZP,{pagination:ae.oM,headerTitle:"headerTitle",actionRef:g,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,t.jsxs)(F.Z,{type:"primary",onClick:function(){n||(j(void 0),v(!0))},children:[(0,t.jsx)(V.Z,{})," \u6DFB\u52A0"]},"primary")]},request:K,columns:le,rowSelection:{onChange:function(l,u){$(u)}}}),(C==null?void 0:C.length)>0&&(0,t.jsx)(z.Z,{extra:(0,t.jsx)("div",{children:(0,t.jsxs)("span",{children:["\u5DF2\u9009\u4E2D",C.reduce(function(o,l){return o+l.id},0)," \u4E2A\u8D26\u53F7"]})}),children:(0,t.jsx)(F.Z,{onClick:(0,c.Z)(s().mark(function o(){var l,u;return s().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return console.log("selectedRowsState--->",C),m.next=3,O({data:C});case 3:$([]),(l=g.current)===null||l===void 0||(u=l.reloadAndRest)===null||u===void 0||u.call(l);case 5:case"end":return m.stop()}},o)})),children:"\u6279\u91CF\u5220\u9664"})}),(0,t.jsx)(re,{onSubmit:function(){var o=(0,c.Z)(s().mark(function l(u){var h;return s().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(u.id==null){p.next=6;break}return p.next=3,J({data:(0,d.Z)((0,d.Z)({},U),u)});case 3:h=p.sent,p.next=9;break;case 6:return p.next=8,X({data:u});case 8:h=p.sent;case 9:h&&(j(void 0),v(!1),g.current&&g.current.reload());case 10:case"end":return p.stop()}},l)}));return function(l){return o.apply(this,arguments)}}(),onCancel:function(){j(void 0),v(!1)},visible:n,values:U||{}})]})},ue=te}}]);
